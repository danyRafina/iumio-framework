<?php

/**
 *
 *  * This is an iumio Framework component
 *  *
 *  * (c) RAFINA DANY <danyrafina@gmail.com>
 *  *
 *  * iumio Framework - iumio Components
 *  *
 *  * To get more information about licence, please check the licence file
 *
 */

namespace iumioFramework\Bin;


try {
    $loader = require_once __DIR__ . '/../vendor/iumio_framework/Core/Requirement/EngineAutoloader.php';
} catch (\Exception $e) {
    throw new \Exception("Framework Console Manager error  : Cannot get autoloader => ".$e->getMessage());
}

use iumioFramework\Core\Base\Debug\Debug;
use iumioFramework\Core\Console\CoreManager;
use iumioFramework\Core\Console\Exceptions\Exception500;
use iumioFramework\Core\Console\FEnvFcm;

/**
 * Class FrameworkConsoleManager
 * This is the framework console manager.
 * Allow to manage the framework components such as cache, compiled file, etc.
 * @package iumioFramework\Bin
 * @category Framework
 * @licence  MIT License
 * @link https://framework.iumio.com
 * @author   RAFINA Dany <dany.rafina@iumio.com>
 */

class FrameworkConsoleManager
{
    /** Manager main function
     * @param int $argc
     * @param array $argv
     * @throws
     */
    public function main(int $argc, array $argv)
    {
        FEnvFcm::__initialize();
        Debug::enabled();
        $this->restore();
        $man = new CoreManager();
        $man->run($argc, $argv);
    }

    /**
     * Restore handler
     */
    private function restore() {
        restore_error_handler();
        restore_exception_handler();
    }
}

$e = new FrameworkConsoleManager();
$e->main($argc, $argv);
